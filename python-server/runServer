  #!/bin/bash

# Auto-restart loop for server
while true; do
  echo "Starting server..."

  python server.py  \
    --email=youremail@gmail.com  \
    --api-key=foobar \
    --host=localhost \
    --port=8000  \
    --cloud-host=wss://projectatlantis.ai  \
    --cloud-port=443  \
    --service-name=home \
    --app-name=pa

  exit_code=$?
  echo "Server exited with code $exit_code"

  # If exit code is 0 (clean shutdown), don't restart
  if [ $exit_code -eq 0 ]; then
    echo "Clean shutdown detected. Not restarting."
    break
  fi

  echo "Restarting in 2 seconds..."
  sleep 2
done